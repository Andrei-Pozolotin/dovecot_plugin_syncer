
passdb {
  driver = passwd-file
  args = /etc/dovecot/auth.conf
}

userdb {
  driver = passwd-file
  args = /etc/dovecot/auth.conf
}

auth_mechanisms = plain
disable_plaintext_auth = no

mail_home = /etc/dovecot/data/%d/%n
mail_location = maildir:~/mail:LAYOUT=fs:DIRNAME=_m_a_i_l_

protocols = imap lmtp sieve

# 'notify' is syncer dependency
mail_plugins = $mail_plugins notify

# activate syncer per protocol
protocol imap {
    mail_plugins = $mail_plugins syncer
}
protocol lmtp {
    mail_plugins = $mail_plugins syncer
}
protocol sieve {
    mail_plugins = $mail_plugins syncer
}
protocol doveadm {
    mail_plugins = $mail_plugins syncer
}
protocol sieve-filter {
    mail_plugins = $mail_plugins syncer
}

# configure syncer settings
plugin {

    # plugin outpur folder name inside <mail_home>
    syncer_dir = syncer

    # enable plugin messages and marker file content
    syncer_notice = yes
    
    # enable content in plugin guid report marker files
    syncer_content = yes
    
    # TODO
    # syncer_script = /etc/dovecot/syncer-script.sh

    # sieve-filter testing    
    sieve_dir = ~/sieve
    sieve = ~/sieve/active.sieve
    
}
